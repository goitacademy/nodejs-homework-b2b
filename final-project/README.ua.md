**Читати на інших мовах: [Українська](README.ua.md), [Polski](README.pl.md)**

# Домашнее задание 5

Написати REST API для реєстрації та автоизації, та переписати логіку роботи з контактами так, щоб лише зареєстрований користувач
міг додавати контакти та кожен контакт записувався як доданий конкретним користуавчем.
Для тестування роутів використовуйте [Postman](https://www.getpostman.com/).
Робота повинна бути створена у репозиторії `hw05-register-auth`

## Крок 1

У колекцію `users` додайте:
- обов'язкове поле `password`, у якому буде зберігатися пароль у захешованому вигляді;
- необов'язкове поле `token`;

## Крок 2

Створіть у додатку ендпоінт `auth` та додайте у ньому такі роути:

### @ POST /api/register

- Отримує `body` у форматі `{name, email, phone, passport, birthday, password, repeatPassword}` (усі поля обов'язкові);
- якщо поля `password` и `repeatPassword` не співпадають, ппотрібно повертати 400 помилку з текстом `password and passwordRepeat should be the same`;
- якщо у `body` немає якихось обов'язкових полів або вони не відповідають правилам валідації, повертає відповідь зі статусом `400` и текстом помилки;
- Якщо з `body` все добре, зберігає користувача у базі в колекції `users` (пароль повинен зберігатися у захешованому вигляді);
- Якщо об'єкт успішно збережений у базі - повертає об'єкт з полями `{name, email}` та статусом `201`;

### @ POST /api/login

- Отримує `body` у форматі `{email, password}` (усі поля обов'язкові);
- якщо у `body` немає якихось обов'язкових полів або вони не відповідають правилам валідації, повертає відповідь зі статусом `400` и текстом помилки;
- Якщо кристувача з таким email у базі немає, або пароль не співпадає зі збереженим у базі - повертає 401 помилку;
- Якщо все добре, створює так повертає JWT-токен;

### @ GET /api/current

- Отримує у заголовку `Authorization` `Bearer token`;
- Якщо токен валідний так строк його дії ще не закінчився, повертає об'ект з полями `{name, email}`;
- Якщо токен не валідний або строк його дії закінчився - повертає 401 помилку;

### @ GET /api/logout

- Отримує у заголовку `Authorization` `Bearer token`;
- Якщо токен валідний так строк його дії ще не закінчився, приводить його до "" у базі даних;
- Якщо токен не валідний або строк його дії закінчився - повертає 401 помилку;

## Крок 3

Додайте у колекцію `contacts` ще одне поле `owner` - у ньому буде зберігатися id користувача, який додав контакт.

## Крок 4

Перепишіть ваші роути для роботи з контактами, додавши до них таку логіку:

### @ GET /api/contacts

- для виконання запиту користувач має бути авторизований;
- повертає масив усіх контактів авторизованого користувача у json-форматі зі статусом `200`

### @ GET /api/contacts/:id

- для виконання запиту користувач має бути авторизований;
- при пошуку контакта по `id` потрібно перевіряти, що цей контакт додав користувач, що здійснює, а якщо ні - повертати відповідь з 404 статусом;

### @ POST /api/contacts

- для виконання запиту користувач має бути авторизований;
- при додавані контакту у поле `owner` записується `id` користувача, який відправив запит;

### @ PUT /api/contacts/:id

- для виконання запиту користувач має бути авторизований;
- при пошуку контакта по `id` потрібно перевіряти, що цей контакт додав користувач, що здійснює, а якщо ні - повертати відповідь з 404 статусом;

### @ DELETE /api/contacts/:id

- для виконання запиту користувач має бути авторизований;
- при пошуку контакта по `id` потрібно перевіряти, що цей контакт додав користувач, що здійснює, а якщо ні - повертати відповідь з 404 статусом;

### @ PATCH /api/contacts/:id/favorite

- для виконання запиту користувач має бути авторизований;
- при пошуку контакта по `id` потрібно перевіряти, що цей контакт додав користувач, що здійснює, а якщо ні - повертати відповідь з 404 статусом;


